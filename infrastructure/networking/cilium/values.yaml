# Cluster identity
cluster:
  name: demo-cluster # CHANGE: Your cluster name
  id: 1

# Kube-proxy replacement
kubeProxyReplacement: true
k8sServiceHost: localhost    # CHANGE: Your API server IP (e.g., 192.168.1.10) or localhost for Talos
k8sServicePort: 7445         # CHANGE: 6443 for standard k8s, 7445 for Talos proxy

# Talos OS compatibility
cgroup:
  autoMount:
    enabled: false
  hostRoot: /sys/fs/cgroup
bpf:
  autoMount:
    enabled: false
  hostRoot: /sys/fs/bpf

# IPAM
ipam:
  mode: kubernetes

operator:
  rollOutPods: true
  replicas: 1

rollOutCiliumPods: true

securityContext:
  capabilities:
    ciliumAgent: ["CHOWN", "KILL", "NET_ADMIN", "NET_RAW", "IPC_LOCK", "SYS_ADMIN", "SYS_RESOURCE", "DAC_OVERRIDE", "FOWNER", "SETGID", "SETUID"]
    cleanCiliumState: ["NET_ADMIN", "SYS_ADMIN", "SYS_RESOURCE"]

devices:
  - e+

debug:
  enabled: false

# L2 announcements for LoadBalancer IPs
l2announcements:
  enabled: true
externalIPs:
  enabled: true
loadBalancer:
  acceleration: best-effort
  algorithm: maglev

# Gateway API (replaces Ingress)
gatewayAPI:
  enabled: true
  enableAlpn: true
  enableAppProtocol: true

envoy:
  securityContext:
    capabilities:
      keepCapNetBindService: true
      envoy: [NET_ADMIN, PERFMON, BPF]

# Hubble observability (ArgoCD manages this - bootstrap with hubble disabled)
hubble:
  enabled: true
  relay:
    enabled: true
    rollOutPods: true
  ui:
    enabled: true
    rollOutPods: true
