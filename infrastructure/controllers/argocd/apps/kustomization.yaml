apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - projects.yaml
  # Wave 0: Foundation
  - cilium-app.yaml
  - 1password-connect-app.yaml
  - external-secrets-app.yaml
  # Wave 1: Storage
  - longhorn-app.yaml
  - snapshot-controller-app.yaml
  - volsync-app.yaml
  # Wave 2: Backup checker
  - pvc-plumber-app.yaml
  # Wave 3: Policy engine
  - kyverno-app.yaml
  # Wave 4: CNPG operator (CRDs must exist before database clusters)
  - cnpg-operator-app.yaml
  # Wave 5: Infrastructure (gateway, cloudflared, NFS CSI, CNPG clusters)
  - infrastructure-appset.yaml
  # Wave 7: Applications (auto-discovery)
  - my-apps-appset.yaml
